<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MoodMap</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --bg-main:#0f0b10;
  --bg-panel:#18121a;
  --bg-soft:#1f1722;

  --accent:#ffb4a2;          /* peach */
  --accent2:#cdb4db;         /* lavender */
  --accent-soft: rgba(255,180,162,0.25);

  --text:#f2e9e4;
  --muted:#c9b8b2;

  --border: rgba(255,255,255,0.12);
  --border2: rgba(255,255,255,0.18);

  --particle:255,220,200;
}


*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--text);
  overflow-x:hidden;

  background:
    /* main soft glow */
    radial-gradient(
      1200px 700px at 50% 35%,
      rgba(255,180,162,0.20),
      transparent 60%
    ),

    /* left blush */
    radial-gradient(
      900px 900px at -15% 50%,
      rgba(205,180,219,0.16),
      transparent 65%
    ),

    /* right blush */
    radial-gradient(
      900px 900px at 115% 50%,
      rgba(255,180,162,0.14),
      transparent 65%
    ),

    /* bottom depth */
    radial-gradient(
      900px 600px at 50% 110%,
      rgba(0,0,0,0.75),
      transparent 70%
    ),

    /* base */
    linear-gradient(
      180deg,
      #0e0a11,
      #120d16 45%,
      #0e0a11
    );
}

body[data-mood="work"]{
  --bg-accent: rgba(255,180,162,0.12);
}
body[data-mood="date"]{
  --bg-accent: rgba(251,113,133,0.18);
}
body[data-mood="quick_bite"]{
  --bg-accent: rgba(34,211,238,0.18);
}
body[data-mood="budget"]{
  --bg-accent: rgba(148,163,184,0.18);
}

.focusGlow{
  background:
    radial-gradient(
      600px 400px at 50% 48%,
      var(--bg-accent),
      transparent 70%
    );
}


.bgOrbs{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -9;
}

.bgOrb{
  position: absolute;
  width: 420px;
  height: 420px;
  border-radius: 50%;
  filter: blur(120px);
  opacity: 0.22;
  animation: floatOrb 26s ease-in-out infinite alternate;
}

.bgOrb.peach{
  background: rgba(255,180,162,0.45);
  left: 10%;
  top: 20%;
}

.bgOrb.lavender{
  background: rgba(205,180,219,0.45);
  right: 12%;
  bottom: 18%;
  animation-delay: -10s;
}

@keyframes floatOrb{
  from{ transform: translateY(-40px); }
  to{ transform: translateY(40px); }
}


body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,180,162,0.05), transparent 60%),
    radial-gradient(circle at 80% 70%, rgba(205,180,219,0.05), transparent 60%);
  animation: drift 18s linear infinite alternate;
  z-index:-12;
}

body::after{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -10;
  background:
    linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 80px 80px;
  opacity: 0.12;
}

.vignette{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -8;
  background: radial-gradient(
    circle at center,
    transparent 55%,
    rgba(0,0,0,0.55) 100%
  );
  animation: breathe 12s ease-in-out infinite;
}

@keyframes breathe{
  from{ opacity: 0.55; }
  to{ opacity: 0.75; }
}



@keyframes drift{
  from{ transform: translateY(-20px); }
  to{ transform: translateY(20px); }
}


/* ===========================================================
   âœ… FULL MOOD BACKGROUND SCENES (not just tint)
   =========================================================== */

.moodScene{
  position:fixed;
  inset:0;
  z-index:-11;
  pointer-events:none;
  opacity:1;
  transition: opacity 900ms cubic-bezier(.2,1,.2,1);
}

.sceneLayer{
  position:absolute;
  inset:0;
  opacity:0;
  transition: opacity 950ms cubic-bezier(.2,1,.2,1);
}

/* WORK */
.scene-work{
  background:
    radial-gradient(circle at 18% 22%, rgba(255,180,162,0.22), transparent 55%),
    radial-gradient(circle at 72% 40%, rgba(205,180,219,0.20), transparent 60%),
    radial-gradient(circle at 50% 82%, rgba(255,180,162,0.14), transparent 60%),
    linear-gradient(
      180deg,
      #0e0a11,
      #120d16 45%,
      #0e0a11
    );
}

/* DATE */
.scene-date{
  background:
    radial-gradient(circle at 18% 24%, rgba(251,113,133,0.20), transparent 54%),
    radial-gradient(circle at 68% 28%, rgba(167,139,250,0.22), transparent 56%),
    radial-gradient(circle at 52% 86%, rgba(147,51,234,0.14), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.90), rgba(14,3,20,1));
}

/* QUICK BITE */
.scene-quick{
  background:
    radial-gradient(circle at 14% 18%, rgba(34,211,238,0.22), transparent 55%),
    radial-gradient(circle at 82% 62%, rgba(56,189,248,0.20), transparent 60%),
    radial-gradient(circle at 54% 90%, rgba(14,165,233,0.12), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.90), rgba(2,10,18,1));
}

/* BUDGET */
.scene-budget{
  background:
    radial-gradient(circle at 18% 18%, rgba(148,163,184,0.14), transparent 55%),
    radial-gradient(circle at 72% 54%, rgba(100,116,139,0.14), transparent 60%),
    radial-gradient(circle at 54% 90%, rgba(203,213,225,0.07), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.92), rgba(7,10,14,1));
}

/* active scene */
body.mood-work .scene-work{opacity:1}
body.mood-date .scene-date{opacity:1}
body.mood-quick_bite .scene-quick{opacity:1}
body.mood-budget .scene-budget{opacity:1}

/* canvas particles */
#particles{
  position:fixed;
  inset:0;
  z-index:-8;
  pointer-events:none;
  opacity:0.55;
  transition: opacity .4s ease;
}

#particles{
  filter: hue-rotate(-20deg) saturate(0.6) brightness(0.9);
  opacity:0.35;
}


.noise{
  position:fixed;
  inset:0;
  z-index:-7;
  pointer-events:none;
  opacity:0.02;
  background-image:url("https://grainy-gradients.vercel.app/noise.svg");
  mix-blend-mode: soft-light;
}

/* keep old element (script still uses it) */
.moodGradient{
  position:fixed;
  inset:0;
  z-index:-10;
  background:#000;
  opacity:0;
  pointer-events:none;
}

/* main */
.app{
  max-width:1180px;
  margin:auto;
  padding:46px 26px 130px;
  
}

.emptyHint{
  margin-top: 80px;
  text-align: center;
  font-size: 14px;
  opacity: 0.45;
  letter-spacing: 0.3px;
}


/* ================= Header ================= */
header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:14px;
  margin-bottom:18px;
  flex-wrap:wrap;
}

.brand{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.title{
  font-size:32px;
  font-weight:1000;
  letter-spacing:-0.6px;
}
.subtitle{
  color:rgba(255,255,255,0.62);
  font-size:13px;
  margin-top:0px;
}

/* âœ… right actions */
.userbox{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.welcomeChip{
  padding:10px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background: rgba(255,255,255,0.05);
  font-size:13px;
  color:rgba(255,255,255,0.88);
}

/* ================= Top buttons ================= */
.topBtn{
  color:white;
  text-decoration:none;
  font-weight:1000;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:rgba(255,255,255,0.05);
  transition: transform .16s ease, box-shadow .16s ease, border .16s ease;
  cursor:pointer;
}
.topBtn:hover{
  transform: translateY(-2px);
  border-color: var(--border2);
  box-shadow: 0 18px 60px rgba(0,0,0,0.60);
}

.logoutBtn{
  color:white;
  text-decoration:none;
  font-weight:1000;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.14);
  background:rgba(239,68,68,0.14);
  transition: transform .16s ease, box-shadow .16s ease;
}
.logoutBtn:hover{
  transform: translateY(-2px);
  box-shadow: 0 18px 60px rgba(239,68,68,0.18);
}

/* ================= Search Users ================= */
.searchWrap{
  position:relative;
}

.userSearch{
  width:270px;
  background: rgba(255,255,255,0.05);
  border:1px solid var(--border);
  color:var(--text);
  padding:10px 12px 10px 36px;
  border-radius:999px;
  font-size:13px;
  outline:none;
  transition: border .2s ease, box-shadow .2s ease;
}
.userSearch:focus{
  border-color: rgba(255,255,255,0.26);
  box-shadow: 0 25px 90px rgba(167,139,250,0.12);
}

.searchIcon{
  position:absolute;
  left:12px;
  top:50%;
  transform:translateY(-50%);
  opacity:.7;
  font-size:14px;
  pointer-events:none;
}

.searchDrop{
  position:absolute;
  right:0;
  top:46px;
  width:380px;
  max-width:90vw;
  border-radius:20px;
  border:1px solid rgba(255,255,255,0.16);
  background: linear-gradient(180deg, rgba(25,30,45,0.94), rgba(10,12,20,0.86));
  backdrop-filter: blur(8px);
  box-shadow: 0 50px 150px rgba(0,0,0,0.80);
  overflow:hidden;
  display:none;
  z-index:200;
}

/* ================= Panel ================= */
.panel{
  margin-top:18px;
  border-radius:24px;
  padding:18px;
  border:1px solid rgba(255,255,255,0.14);
  background: rgba(15,18,30,0.88);
  backdrop-filter: blur(14px);
  box-shadow:
    0 30px 120px rgba(0,0,0,0.45),
    0 1px 0 rgba(255,255,255,0.05) inset;
}

.controls{
  display:flex;
  gap:14px;
  align-items:center;
  flex-wrap:wrap;
}

select, input[type="text"]{
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.12);
  color:var(--text);
  padding:12px 14px;
  border-radius:16px;
  font-size:14px;
  outline:none;
}

input[type="text"]{width:340px}

button{
  margin-left:auto;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border:none;
  color:white;
  padding:12px 18px;
  border-radius:16px;
  font-weight:1000;
  cursor:pointer;
  transition: transform .16s ease, box-shadow .16s ease;
}
button:hover{
  transform:translateY(-2px);
  box-shadow: 0 18px 70px var(--accent-soft);
}
button:disabled{
  opacity:.55;
  cursor:not-allowed;
  box-shadow:none;
  transform:none;
}

/* results */
.results{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
  gap:18px;
  margin-top:22px;
}

.card{
  position:relative;
  overflow:hidden;
  border-radius:22px;
  padding:18px;
  min-height:190px;

  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,0.04),
      rgba(255,255,255,0.01)
    ),
    rgba(18,22,36,0.88);

  border:1px solid rgba(255,255,255,0.14);
  backdrop-filter: blur(16px);

  box-shadow:
    0 30px 90px rgba(0,0,0,0.75),
    0 1px 0 rgba(255,255,255,0.04) inset;

  /* entrance only */
  opacity:0;
  animation: cardIn 420ms cubic-bezier(.2,.8,.2,1) forwards;
  animation-fill-mode: both;
  will-change: transform;

  cursor:pointer;
  transition:
    transform .22s cubic-bezier(.2,.9,.2,1),
    box-shadow .22s ease,
    border-color .22s ease;
}

.card:active{
  transform: scale(0.97);
}

@keyframes cardIn{
  from{
    transform: translateY(14px) scale(0.985);
    opacity:0;
  }
  to{
    transform:none;
    opacity:1;
  }
}

.card::after{
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(circle, rgba(255,255,255,0.12), transparent 55%);
  opacity:0;
  transition: opacity .25s ease;
}

.card:active::after{
  opacity:1;
}



/* stagger */
.card:nth-child(1){ animation-delay:0ms }
.card:nth-child(2){ animation-delay:40ms }
.card:nth-child(3){ animation-delay:80ms }
.card:nth-child(4){ animation-delay:120ms }
.card:nth-child(5){ animation-delay:160ms }
.card:nth-child(6){ animation-delay:200ms }

/* hover = float, not jump */
.card:hover{
  transform: translateY(-3px) scale(1.002);
  border-color: rgba(167,139,250,0.35);

  box-shadow:
    0 28px 80px rgba(0,0,0,0.55),
    0 0 0 1px rgba(167,139,250,0.22);
}



/* actions */
.actions{
  position:absolute;
  right:14px;
  top:14px;
  display:flex;
  gap:10px;
}

.iconBtn{
  width:36px;height:36px;border-radius:14px;
  border:1px solid rgba(255,255,255,0.14);
  background:rgba(0,0,0,0.32);
  color:white;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  font-weight:1000;
  transition: transform .16s ease, border .16s ease;
}
.iconBtn:hover{
  transform: translateY(-2px);
  border-color: rgba(255,255,255,0.24);
}
.iconBtn.pinned{border-color: var(--accent)}

/* skeleton */
.skeleton{
  border-radius:24px;
  border:1px solid rgba(255,255,255,0.12);
  background:rgba(255,255,255,0.05);
  height:190px;
  position:relative;
  overflow:hidden;
}
.skeleton::after{
  content:"";
  position:absolute; inset:0;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.09),transparent);
  transform:translateX(-100%);
  animation:shimmer 1.4s infinite;
}
@keyframes shimmer{to{transform:translateX(100%)}}

/* ================= Premium Place Modal ================= */
#modalBackdrop{
  position: fixed;
  inset: 0;
  z-index: 9998;
  opacity: 0;
  pointer-events: none;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  transition: opacity 240ms cubic-bezier(.2,1,.2,1);
}

#modalBackdrop.active{
  opacity: 1;
  pointer-events: auto;
}

#modal{
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%,-50%);
  z-index: 9999;

  width: min(980px, 92vw);
  max-height: 90vh;
  overflow: hidden; /* âœ… IMPORTANT */

  border-radius: 26px;
  border: 1px solid rgba(255,255,255,0.18);

  background: linear-gradient(180deg, rgba(20,22,35,0.82), rgba(0,0,0,0.72));
  box-shadow:
    0 70px 200px rgba(0,0,0,0.82),
    0 1px 0 rgba(255,255,255,0.05) inset;

  opacity: 0;
  pointer-events: none;

  transition:
    transform 220ms cubic-bezier(.18,.9,.25,1),
    opacity 180ms ease;
}


#modal.active{
  opacity: 1;
  pointer-events: auto;
  transform: translate(-50%,-50%) scale(1);
}

#modalInner{
  max-height: calc(90vh - 60px);
  overflow-y: auto;
  animation: modalInnerIn 360ms cubic-bezier(.2,.8,.2,1);
}

@keyframes modalInnerIn{
  from{
    opacity:0;
    transform: translateY(10px) scale(0.985);
  }
  to{
    opacity:1;
    transform:none;
  }
}


/* ===========================================================
   âœ… Floating Follow Requests Panel (Bottom-right corner)
   =========================================================== */
#reqBackdrop{
  display:none; /* âœ… remove full screen overlay */
}

#reqModal{
  position: fixed;
  right: 22px;
  bottom: 22px;
  z-index: 12000;

  width: min(420px, calc(100vw - 44px));
  max-height: 58vh;
  overflow: auto;

  border-radius: 22px;
  border: 1px solid rgba(255,255,255,0.16);
  background: linear-gradient(180deg, rgba(20,22,35,0.92), rgba(0,0,0,0.75));
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

  box-shadow: 0 40px 140px rgba(0,0,0,0.82);

  opacity: 0;
  pointer-events: none;
  transform: translateY(16px) scale(0.98);
  transition: opacity 240ms cubic-bezier(.2,1,.2,1),
              transform 240ms cubic-bezier(.2,1,.2,1);
}
#reqModal.active{
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0) scale(1);
}

.reqInner{ padding: 14px 14px 12px; }
.reqTitle{ margin:0; font-size:15px; font-weight:1000; }
.reqSub{ margin-top:6px; font-size:12px; opacity:.70; }

.reqList{ margin-top:12px; }

.smallBtn{
  border:none;
  color:white;
  font-weight:1000;
  cursor:pointer;
  border-radius:14px;
  padding:9px 12px;
  background: rgba(255,255,255,0.08);
}
.smallBtn.primary{
  background: linear-gradient(135deg,var(--accent),var(--accent2));
}
.smallBtn.danger{
  background: rgba(239,68,68,0.18);
  border:1px solid rgba(239,68,68,0.20);
}
.smallBtn.reqClose{
  margin-left:auto;
  width:38px;
  height:38px;
  display:grid;
  place-items:center;
  padding:0;
  border-radius:14px;
}

.reqItem{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;

  padding:12px;
  border-radius:18px;

  border:1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.20);
  margin-bottom:10px;
}
.reqUser{ font-weight:1000; font-size:13px; }
.reqMeta{ font-size:12px; opacity:.68; margin-top:4px; }
.reqBtns{ display:flex; gap:10px; }


/* ===========================================================
   ðŸ†• SPLIT GLASS PLACE MODAL (Map + Details)
   =========================================================== */

.modalInner.splitModal{
  display:grid;
  grid-template-columns: 1.15fr 0.85fr;
  padding:0;
  overflow:hidden;
  max-height: 86vh;
}

/* LEFT SIDE â€“ MAP */
.splitMap{
  position:relative;
  min-height:440px;
  background: rgba(0,0,0,0.35);
}

.splitMap iframe{
  width:100%;
  height:100%;
  border:none;

  filter:
    saturate(1.15)
    contrast(0.92)
    brightness(1.06);

  transform: scale(1.02);
}

/* cartoon-ish soft overlay */
.splitMap::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;

  background:
    radial-gradient(
      circle at 20% 20%,
      rgba(255,255,255,0.10),
      transparent 45%
    ),
    linear-gradient(
      180deg,
      rgba(255,255,255,0.05),
      rgba(0,0,0,0.22)
    );
}

/* RIGHT SIDE â€“ DETAILS */
.splitDetails{
  padding:22px 22px 20px;
  display:flex;
  flex-direction:column;
  gap:16px;
  overflow-y: auto;
  scrollbar-width: thin;
}

/* HEADER */
.splitHeader{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
  padding-bottom:14px;
  border-bottom:1px solid rgba(255,255,255,0.08);
}

.splitTitle{
   font-size:20px;
  line-height:1.2;
  font-weight:1000;
  letter-spacing:-0.4px;
}


.splitMeta{
  margin-top:6px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.badge{
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
  border:1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
}

/* INFO ROWS */
.infoRow{
  display:flex;
  gap:12px;
  align-items:flex-start;

  padding:10px 12px;
  border-radius:14px;

  background: rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.10);

  font-size:13px;
}


.infoRow:hover{
  transform: translateY(-1px);
  box-shadow:
    0 18px 45px rgba(0,0,0,0.45),
    0 1px 0 rgba(255,255,255,0.06) inset;
}


.infoIcon{
  width:28px;
  height:28px;
  border-radius:10px;

  display:grid;
  place-items:center;

  background: rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.10);
}

/* ACTION BAR */
.splitActions{
  margin-top:auto;
  display:flex;
  gap:12px;
}

.splitActions button{
  flex:1;
  border-radius:14px;
  padding:12px;
  font-weight:1000;
}

/* FIX action links inside place modal */
.splitActions .linkBtn{
  flex:1;
  text-align:center;
  text-decoration:none;

  padding:12px;
  border-radius:14px;

  font-weight:1000;
  font-size:14px;
  color:white;

  background: linear-gradient(135deg,var(--accent),var(--accent2));
  box-shadow: 0 14px 40px rgba(0,0,0,0.35);

  transition:
    transform .16s ease,
    box-shadow .16s ease,
    filter .16s ease;
}

.splitActions .linkBtn:hover{
  transform: translateY(-2px);
  box-shadow: 0 22px 60px rgba(0,0,0,0.45);
  filter: brightness(1.05);
}

.splitActions .linkBtn:active{
  transform: translateY(0);
}

.splitActions .linkBtn:nth-child(2){
  background: rgba(255,255,255,0.10);
  border:1px solid rgba(255,255,255,0.16);
  box-shadow:none;
}

/* ===========================================================
   ðŸ†• CLEAN PLACE MODAL (NO MAP / NO SPLIT)
=========================================================== */

.modalInner.cleanModal{
  display:flex;
  flex-direction:column;
  gap:18px;
  padding:22px;
}

/* header */
.cleanHeader{
  display:flex;
  justify-content:space-between;
  gap:14px;
}

.cleanTitle{
  font-size:22px;
  font-weight:1000;
  letter-spacing:-0.4px;
}

.cleanMeta{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:6px;
}

/* sections */
.cleanSection{
  padding:14px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
}

.cleanSectionTitle{
  font-size:13px;
  font-weight:900;
  opacity:.7;
  margin-bottom:8px;
}

/* actions */
.cleanActions{
  display:flex;
  gap:12px;
  margin-top:auto;
}

.cleanActions .linkBtn{
  flex:1;
  text-align:center;
  text-decoration:none;
  padding:12px;
  border-radius:14px;
  font-weight:1000;
  color:white;
  background: linear-gradient(135deg,var(--accent),var(--accent2));
}

.cleanActions .linkBtn.secondary{
  background: rgba(255,255,255,0.10);
  border:1px solid rgba(255,255,255,0.16);
}


/* ===========================================================
   âœ… FIXED SAVED PLACES ROW (PILL STYLE)
=========================================================== */

#savedWrap{
  margin-top: 26px;
}

/* section wrapper */
.savedSection{
  margin-bottom: 18px;
}

/* header */
.savedSectionTitle{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
  font-size:13px;
  font-weight:900;
  opacity:.9;
}

/* horizontal scroll row */
.carousel{
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding-top: 4px;  
  padding-bottom:6px;
  scroll-snap-type:x mandatory;
}

.carousel::-webkit-scrollbar{
  height:6px;
}
.carousel::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,0.14);
  border-radius:999px;
}

/* ðŸ”¥ THE PILL CARD */
.pinCard{
  flex:0 0 auto;
  height:56px;              /* â¬† bigger */
  padding:0 20px;           /* â¬† more breathing room */
  border-radius:16px;       /* â¬› squarer (was 999px) */

  display:flex;
  flex-direction:column;
  justify-content:center;

  background: rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.14);
  backdrop-filter: blur(14px);

  cursor:pointer;
  white-space:nowrap;

  transition:
    transform .24s cubic-bezier(.2,.8,.2,1),
    background .24s ease,
    border-color .24s ease;
}

.pinCard:hover{
  transform:translateY(-1px);
  background: rgba(255,255,255,0.10);
  border-color: var(--accent);
}

/* text */
.pinCardTitle{
  font-size:13px;
  font-weight:900;
  line-height:1.2;
}

.pinCardMeta{
  font-size:11px;
  opacity:.65;
  margin-top:2px;
}


  .splitMap::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.06),
    inset 0 -60px 80px rgba(0,0,0,0.45);
}

#modal {
  max-height: 90vh;
  overflow: hidden;
}

#modalInner {
  max-height: calc(90vh - 60px);
  overflow-y: auto;
}

.panel,
.card,
#modal{
  background:
    linear-gradient(
      180deg,
      rgba(255,255,255,0.035),
      rgba(255,255,255,0.015)
    ),
    var(--bg-panel);

  border:1px solid var(--border);
  box-shadow: 0 18px 60px rgba(0,0,0,0.55);
}

button,
.linkBtn,
.topBtn{
  background: linear-gradient(135deg,var(--accent),var(--accent2)) !important;
  color:#2b1f23 !important;
  font-weight:900;
  border-radius:18px;
}


button:hover,
.linkBtn:hover{
  transform: translateY(-2px);
  box-shadow: 0 20px 50px rgba(255,180,162,0.35);
}

select,
input[type="text"]{
  background: var(--bg-soft);
  border:1px solid var(--border);
  color:var(--text);
  border-radius:18px;
  padding:12px 16px;
}

select:focus,
input:focus{
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(255,180,162,0.25);
}

.welcomeChip{
  background: rgba(255,180,162,0.12);
  color: var(--text);
  border:1px solid rgba(255,180,162,0.25);
}

.badge{
  background: rgba(205,180,219,0.18);
  border:1px solid rgba(205,180,219,0.35);
  color: var(--text);
}

.sceneLayer{
  filter: saturate(0.75) brightness(0.9);
}


body.mood-work .sceneLayer{
  filter: hue-rotate(-10deg) saturate(0.7) brightness(0.85);
}

body.mood-date .sceneLayer{
  filter: hue-rotate(12deg) saturate(0.85) brightness(0.9);
}

body.mood-budget .sceneLayer{
  filter: saturate(0.4) brightness(0.8);
}

.moodScene{
  display:none;
}

.bottomFade{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: 220px;
  pointer-events: none;
  z-index: -6;
  background: linear-gradient(
    to bottom,
    transparent,
    rgba(0,0,0,0.85)
  );
}

.focusGlow{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -9;
  background:
    radial-gradient(
      600px 400px at 50% 48%,
      rgba(255,180,162,0.08),
      transparent 70%
    );
}

.sideGlow{
  position: fixed;
  top: 0;
  bottom: 0;
  width: 260px;
  pointer-events: none;
  z-index: -9;
}

.sideGlow.left{
  left: 0;
  background: radial-gradient(
    120% 60% at 0% 50%,
    rgba(255,180,162,0.14),
    transparent 70%
  );
}

.sideGlow.right{
  right: 0;
  background: radial-gradient(
    120% 60% at 100% 50%,
    rgba(205,180,219,0.14),
    transparent 70%
  );
}

/* =========================================
   ðŸŒŒ Ambient Floating + Parallax FX
========================================= */

.ambientFX{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -6;
  overflow: hidden;
}

.fx{
  position: absolute;
  width: 280px;
  height: 280px;
  border-radius: 50%;
  filter: blur(120px);
  opacity: 0.18;
  animation: floatFX 30s ease-in-out infinite alternate;
  will-change: transform;
}

/* individual personalities */
.fx1{
  background: rgba(255,180,162,0.55);
  left: -6%;
  top: 18%;
}
.fx2{
  background: rgba(205,180,219,0.55);
  right: -8%;
  top: 32%;
  animation-delay: -8s;
}
.fx3{
  background: rgba(255,180,162,0.45);
  left: -10%;
  bottom: 14%;
  animation-delay: -14s;
}
.fx4{
  background: rgba(205,180,219,0.45);
  right: -6%;
  bottom: 18%;
  animation-delay: -20s;
}

@keyframes floatFX{
  from{ transform: translateY(-40px); }
  to{ transform: translateY(40px); }
}


.bgAction{
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  opacity: .35;
  cursor: pointer;
  animation: pulse 2s infinite;
}

@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.3)}
  100%{transform:scale(1)}
}

.mapFlowLayer{
  position: fixed;
  inset: 0;
  z-index: -11;
  pointer-events: none;
  opacity: 0.35;
}

.mapFlowLayer svg{
  width: 100%;
  height: 100%;
}

/* route lines */
.route{
  fill: none;
  stroke-width: 2;
  stroke-linecap: round;
  opacity: 0.25;

  animation: routeFloat 18s ease-in-out infinite alternate;
}

.r2{
  animation-duration: 26s;
  opacity: 0.18;
}

@keyframes routeFloat{
  0%{
    transform: translateY(0);
    opacity: 0.18;
  }
  50%{
    opacity: 0.28;
  }
  100%{
    transform: translateY(-12px);
    opacity: 0.18;
  }
}


.r1{ stroke: var(--accent); }
.r2{
  stroke: var(--accent2);
  animation-duration: 28s;
}

/* pulses */
.pulse{
  fill: var(--accent);
  opacity: 0.35;
  animation: pulse 4.5s ease-out infinite;
}

@keyframes pulse{
  0%{ r:4; opacity:.25 }
  70%{ r:18; opacity:0 }
  100%{ r:18; opacity:0 }
}

.p2{
  fill: var(--accent2);
  animation-delay: 1.2s;
}

@keyframes routeMove{
  from{ stroke-dashoffset: 0; }
  to{ stroke-dashoffset: -200; }
}

@keyframes pulse{
  0%{ r:6; opacity:.6; }
  70%{ r:22; opacity:0; }
  100%{ r:22; opacity:0; }
}



/* MOBILE FALLBACK */
@media (max-width: 860px){
  .modalInner.splitModal{
    grid-template-columns: 1fr;
  }
  .splitMap{
    min-height:300px;
    border-right:1px solid rgba(255,255,255,0.10);
  }
}

</style>
</head>

<body class="mood-work">
  <!-- âœ… Full mood scenes -->
  <div class="moodScene">
    <div class="sceneLayer scene-work"></div>
    <div class="sceneLayer scene-date"></div>
    <div class="sceneLayer scene-quick"></div>
    <div class="sceneLayer scene-budget"></div>
  </div>

  <div class="bgOrbs">
    <div class="bgOrb peach"></div>
    <div class="bgOrb lavender"></div>
  </div>

  <div class="mapFlowLayer">
  <svg viewBox="0 0 1200 600" preserveAspectRatio="xMidYMid slice">
    <!-- route lines -->
    <path class="route r1"
      d="M-50,300 C200,200 400,400 650,280 900,160 1150,300 1300,240" />
    <path class="route r2"
      d="M-40,420 C220,360 380,500 620,420 860,340 1080,460 1280,380" />

    <!-- location pulses -->
    <circle class="pulse p1" cx="360" cy="260" r="6"/>
    <circle class="pulse p2" cx="780" cy="340" r="6"/>
  </svg>
</div>


  <div class="vignette"></div>

  <div class="bottomFade"></div>

  <div class="focusGlow"></div>

  <div class="sideGlow left"></div>
  <div class="sideGlow right"></div>

  <div class="ambientChip" id="ambientChip"></div>

  

  <div class="ambientFX">
    <span class="fx fx1"></span>
    <span class="fx fx2"></span>
    <span class="fx fx3"></span>
    <span class="fx fx4"></span>
    <span class="bgAction" data-mood="date" style="top:30%;left:6%"></span>
    <span class="bgAction" data-mood="work" style="bottom:20%;right:8%"></span>
  </div>

  <div class="spaceLayer">
    <span class="planet planet1"></span>
    <span class="planet planet2"></span>
    <span class="planet planet3"></span>

    <span class="comet"></span>

    <span class="star s1"></span>
    <span class="star s2"></span>
    <span class="star s3"></span>
    <span class="star s4"></span>
  </div>


  <!-- keep for compatibility -->
  <div id="moodGradient" class="moodGradient"></div>

  <canvas id="particles"></canvas>
  <div class="noise"></div>

  <div class="app">
    <header>
      <div class="brand">
        <div class="title">MoodMap</div>
        <div class="subtitle">Context-aware place discovery</div>
      </div>

      <div class="userbox">
        <div class="welcomeChip">Welcome, <b>{{username}}</b></div>

        <button class="topBtn" id="myProfileBtn" title="My profile">My Profile</button>

        <button class="topBtn" id="copyProfileBtn" title="Copy profile link">Copy Link</button>

        <button class="topBtn" id="reqBtn" title="Follow requests" style="display:none">
          Requests <span id="reqCount" style="opacity:.9;"></span>
        </button>

        <a class="logoutBtn" href="/logout">Logout</a>
      </div>
    </header>

    <div class="panel">
      <div class="controls">
        <select id="mood">
          <option value="work">Work</option>
          <option value="date">Date</option>
          <option value="quick_bite">Quick Bite</option>
          <option value="budget">Budget</option>
        </select>

        <input type="text" id="searchInput" placeholder="Search places / category..." />

        <button id="findBtn" disabled>Getting locationâ€¦</button>
      </div>
    </div>

    <div id="savedWrap"></div>
    <div id="results" class="results"></div>
  </div>

  <!-- place modal -->
  <div id="modalBackdrop"></div>
  <div id="modal">
    <div id="modalInner" class="modalInner cleanModal"></div>
  </div>

  <!-- follow requests floating panel -->
  <div id="reqBackdrop"></div>
  <div id="reqModal">
    <div class="reqInner">
      <div style="display:flex;gap:12px;align-items:center;">
        <div>
          <h3 class="reqTitle">Follow Requests</h3>
          <div class="reqSub">Approve or reject pending requests</div>
        </div>
        <button class="smallBtn reqClose" id="reqCloseBtn">âœ•</button>
      </div>

      <div class="reqList" id="reqList"></div>
    </div>
  </div>

  <script>window.MOODMAP_USERNAME = "{{user_username}}";</script>
  <script src="https://unpkg.com/opening_hours@3.6.0/opening_hours.min.js"></script>
  <script src="/static/script.js"></script>

  <script>
    const fx = document.querySelectorAll(".fx");

    document.addEventListener("mousemove", e => {
      const x = (e.clientX / window.innerWidth - 0.5) * 30;
      const y = (e.clientY / window.innerHeight - 0.5) * 30;

     fx.forEach((el, i) => {
       const factor = (i + 1) * 0.25;
        el.style.transform = `translate(${x * factor}px, ${y * factor}px)`;
     });
   });
  
   document.querySelectorAll(".bgAction").forEach(el=>{
  el.onclick = ()=>{
    moodSelect.value = el.dataset.mood;
    moodSelect.dispatchEvent(new Event("change"));
  };
});

window.addEventListener("scroll", () => {
  document.body.style.backgroundPosition =
    `center ${window.scrollY * 0.15}px`;
});

 /* =========================
   Mood-based background
========================= */
const moodSelect = document.getElementById("mood");

if (moodSelect) {
  moodSelect.addEventListener("change", e => {
    document.body.setAttribute("data-mood", e.target.value);
  });
}

/* =========================
   Empty results hint
========================= */
const hint = document.getElementById("contextHint");
const results = document.getElementById("results");

if (hint && results) {
  const observer = new MutationObserver(() => {
    hint.style.display = results.children.length ? "none" : "block";
  });
  observer.observe(results, { childList: true });
}

/* =========================
   Background mood dots
========================= */
document.querySelectorAll(".bgAction").forEach(el => {
  el.addEventListener("click", () => {
    if (moodSelect) {
      moodSelect.value = el.dataset.mood;
      moodSelect.dispatchEvent(new Event("change"));
    }
  });
});

/* =========================
   Scroll parallax
========================= */
window.addEventListener("scroll", () => {
  document.body.style.backgroundPosition =
    `center ${window.scrollY * 0.15}px`;
});

  const mapFlow = document.querySelector(".mapFlowLayer");

  document.addEventListener("mousemove", e => {
    if(!mapFlow) return;

    const x = (e.clientX / innerWidth - 0.5) * 12;
    const y = (e.clientY / innerHeight - 0.5) * 12;

    mapFlow.style.transform = `translate(${x}px, ${y}px)`;
  });

  const layer = document.querySelector(".mapFlowLayer");
  let tx = 0, ty = 0, cx = 0, cy = 0;

  document.addEventListener("mousemove", e => {
    tx = (e.clientX / innerWidth - 0.5) * 10;
    ty = (e.clientY / innerHeight - 0.5) * 10;
  });

  function animate(){
    cx += (tx - cx) * 0.04;
    cy += (ty - cy) * 0.04;

    if(layer){
      layer.style.transform = `translate(${cx}px, ${cy}px)`;
    }
    requestAnimationFrame(animate);
  }
  animate();

  </script>

</body>
</html>
